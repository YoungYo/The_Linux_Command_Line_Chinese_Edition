# 第 1 章 什么是 Shell？

当我们讨论命令行的时候，我们其实指的是 shell，shell 实际上是一个程序，可以将用户在键盘输入的命令发送给操作系统，让操作系统去执行。几乎所有的 Linux 发行版都提供了 GNU 项目里的一个 shell 程序，我们称之为 bash。「bash」这个名字是「Bourne Again SHell」的缩写，Bourne 是原始版本的 Unix 系统上的 shell 程序的作者，这个程序被称为 sh，很明显，bash 是增强版的 sh。

## 终端模拟器

当我们使用 GUI 时，我们需要另一个叫做终端模拟器的程序去和 shell 交互，通常在桌面上就能找到它。KDE 用的是 konsole，GNOME 用的是 gnome-terminal，虽然在我们的菜单中 GNOME 更喜欢简单地称之为「terminal」。Linux 上还有很多其他的终端模拟器，但是他们做的事基本上是一样的：让我们能够访问 shell。你可能会根据他们的铃声或者哨声来选择其中的某个终端模拟器。

## 定义你的第一个快捷键

让我们开始吧！运行终端模拟器，我们应该会看到界面上这样显示：

```text
[me@linuxbox ~]$
```

他被叫做「shell 提示符」，当 shell 准备好接收用户的输入时，shell 提示符就会出现。尽管在不同的发行版上 shell 提示符的外表变化多端，但是基本上都会包含「用户名@主机名」，然后后面跟一个当前工作目录，以及一个美元符号「$」。

> **注意：如果最后一个字符是「\#」而不是「$」，说明该终端会话拥有超级用户的权限。这意味着要么就是我们是以 root 用户的身份登录的，要么就是我们选择了一个能提供超级用户权限的终端模拟器登录。**

假设到目前为止一切顺利，那么我们开始尝试敲击键盘。在提示符上输入一些乱七八糟的字母，比如：

```text
[me@linuxbox ~]$ kaekfjaeifj
```

这个命令没有任何意义，所以 shell 也是这样告诉我们，并且又给了我们一次机会去输入。

```text
bash: kaekfjaeifj: command not found
[me@linuxbox ~]$
```

### 历史命令

如果按下向上的方向键，我们将看到提示符后面又出现了之前输入的命令「kaekfjaeifj」。这个叫做历史命令。许多 Linux 发行版都默认记住最后 100 个命令。按向下的方向键，之前的命令就又消失了。

### 移动光标

再次按下向上的方向键，调出之前那个命令，如果我们试着按下向左的方向键或者向右的方向键，就会看到我们可以将光标定位到命令行的任何地方，这使得编辑命令非常方便。

> **关于鼠标和聚焦的一点建议：**
>
> 虽然 Shell 主要是跟键盘打交道，但是你也可以在终端模拟器中使用鼠标。X 窗口系统（使GUI运行的底层引擎）内建了一种机制，可以支持快速的复制粘贴。如果你按住鼠标左键不动然后在文本上拖动去高亮它们（或者在一个单词上双击），他们就会被复制到 X 维护的一个缓冲区中。按下鼠标中键能够将文本粘贴到光标所在的文章。去试试吧！
>
> **注意：**不要试图在终端窗口中用 Ctrl-c 和 Ctrl-v 去执行复制粘贴操作，这不管用。这些快捷键对 Shell 有不同的含义，并且在Microsoft Windows 发布之前就已经使用了很多年了。
>
> 你的图形化桌面（最有可能是 KDE 或 GNOME）可能会有聚焦策略——单击左键聚焦（这是为了模仿 Windows 的行为所做出的努力）。这意味着要想使一个窗口获得焦点（即变得活跃），你需要单击它。这与 X 传统的行为「焦点跟随鼠标」相反，「焦点跟随鼠标」的意思是，只要鼠标放到一个窗口上，这个窗口就会获得焦点。如果你不单击一个窗口，它就不会来到前台运行，但是它可以接收输入。将焦点策略设置为「焦点跟随鼠标」将使复制粘贴操作更为便捷。如果可以的话，尽量尝试一下（一些桌面环境，比如 Ubuntu's Unity 不再支持这个操作了）。我认为如果你尝试了，你会更喜欢它。在窗口管理的配置程序中可以找到设置的地方。

## 尝试一些简单的命令

既然我们已经知道了如何在终端模拟器中输入文本，那么就让我们尝试几个简单的命令。首先试试`date`命令，这个命令的作用是展示当前日期和时间。

```text
[me@linuxbox ~]$ date
Thu Mar 8 15:09:41 EST 2018
```

还有一个类似的命令是`cal`，这个命令默认会展示当前月份的日历。

```text
[me@linuxbox ~]$ cal
     March 2018
Su Mo Tu We Th Fr Sa
             1  2  3
 4  5  6  7  8  9 10
11 12 13 14 15 16 17
18 19 20 21 22 23 24
25 26 27 28 29 30 31
```

如果想查看我们的磁盘当前剩余空间的大小，可以用`df`命令。

```text
[me@linuxbox ~]$ df
Filesystem    1K-blocks        Used    Available    Use%    Mounted on
/dev/sda2      15115452     5012392      9949716     34%             /
/dev/sda5      59631908      265424     30008432     47%         /home
/dev/sda1        147764       17370       122765     13%         /boot
tmpfs            256856           0       256856      0%      /dev/shm
```

同样地，展示空闲内存的大小，可以用`free`命令。

```text
              total        used        free      shared  buff/cache   available
Mem:        8033836     1523484     5338936      163720     1171416     6097980
Swap:       8000508           0     8000508
```

## 结束一个终端对话

通过关闭终端模拟器窗口、在命令行中输入`exit`命令或者按下 Ctrl-d 快捷键都可以结束一个终端会话。

```text
[me@linuxbox ~]$ exit
```

> **幕后的控制台**
>
> 即使我们不打开终端模拟器，有几个终端会话也在图形化的桌面背后持续地运行着。在大多数 Linux 发行版中，你都可以通过按下 Ctrl-Alt-F1 到 Ctrl-Alt-F6 来打开虚拟终端或者虚拟控制台，从而访问到这些终端会话。当一个会话被访问到时，屏幕上会显示一个登录提示，然后我们可以在这里输入用户名密码。按下 Alt-F1 到 Alt-F6 可以切换虚拟控制台。在大多数系统中，我们都可以通过按下 Alt-F7 回到图形化的桌面。

## 小结

本章标志着我们的 Linux 命令行之旅的正式开始，我们对 shell 进行了介绍，对命令行有了初步的了解，还学会了如何开始和结束一个终端会话。我们还知道了如何执行一些简单的命令并执行一些简单的命令行编辑。并没有多么可怕，不是吗？

下一章，我们将学习更多的命令并开始探索 Linux 文件系统。

## 延伸阅读

* 要了解有关 Bourne Shell 之父 Steve Bourne 的更多信息，请参阅以下Wikipedia文章：[http://en.wikipedia.org/wiki/Steve\_Bourne](http://en.wikipedia.org/wiki/Steve_Bourne)
* 这篇维基百科文章是关于bash的原始作者 Brian Fox 的：[https://en.wikipedia.org/wiki/Brian\_Fox\_\(computer\_programmer\)](https://en.wikipedia.org/wiki/Brian_Fox_%28computer_programmer%29)
* 这是计算机学科中有关 shell 概念的文章：[http://en.wikipedia.org/wiki/Shell\_\(computing\)](http://en.wikipedia.org/wiki/Shell_%28computing%29)

